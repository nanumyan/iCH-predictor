<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link rel="stylesheet" href="./css/bootstrap.css" media="screen">
        <link rel="stylesheet" href="./css/bootstrap.min.css">
        <link rel="stylesheet" href="./css/style.css" media="screen">
        
        <script src="./js/libs/jquery-2.1.1.min.js"></script>
    </head>
    <body>
        <!-- Fixed navbar from bootstrappo -->
        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <a class="navbar-brand" href="./index.html">HUNTOLOGY</a>
            </div>
            <div class="navbar-collapse collapse">
              <div class="filters">
               <ul class="nav navbar-nav">
                 <li class="active"><a href="#" data-filter="*">All</a></li>
                 <li class="dropdown"><a data-filter=".Original" href="#" 
                                         data-toggle="dropdown" class="dropdown-toggle">Original <b class="caret"></b></a>
                   <ul class="dropdown-menu">
                        <li><a data-filter=".Original, .Easing" href="#">Easing</a></li>
                        <li><a data-filter=".Original, .Inspiring, .Energetic" href="#">Energetic Inspiring</a></li>
                        <li><a data-filter=".Original, .Sensitive, .Energetic" href="#">Sensitive Energetic</a></li>
                        <li><a data-filter=".Original, .Lively" href="#">Lively</a></li>
                        <li><a data-filter=".Original, .Sensitive" href="#">Sensitive</a></li>
                   </ul>
                 </li>
                 <li class="dropdown"><a data-filter=".Aesthetic" href="#" 
                                         data-toggle="dropdown" class="dropdown-toggle">Aesthetic <b class="caret"></b></a>
                   <ul class="dropdown-menu">
                        <li><a data-filter=".Aesthetic, .Luminous, .Energetic" href="#">Luminous Energetic</a></li>
                        <li><a data-filter=".Aesthetic, .Dark, .Sensitive" href="#">Dark Sensitive</a></li>
                        <li><a data-filter=".Aesthetic, .Joyous, .Flashy" href="#">Joyous Flashy</a></li>
                       <li><a data-filter=".Aesthetic, .Powerful" href="#">Powerful</a></li>
                       <li><a data-filter=".Aesthetic, .Cold" href="#">Cold</a></li>
                       <li><a data-filter=".Aesthetic, .Warm" href="#">Warm</a></li>
                       <li><a data-filter=".Aesthetic, .Soothing" href="#">Soothing</a></li>
                       <li><a data-filter=".Aesthetic, .Lively" href="#">Lively</a></li>                       
                   </ul>
                 </li>
                 <li class="dropdown"><a data-filter=".Smart" href="#" 
                                         data-toggle="dropdown" class="dropdown-toggle">Smart <b class="caret"></b></a>
                   <ul class="dropdown-menu">
                        <li><a data-filter=".Smart, .Luminous, .Natural" href="#">Luminous Natural</a></li>
                        <li><a data-filter=".Smart, .Serene, .Structural" href="#">Serene Structural</a></li>
                        <li><a data-filter=".Smart, .Joyous, .Inspiring" href="#">Joyous Inspiring</a></li>
                        <li><a data-filter=".Smart, .Impressive, .Structural" href="#">Impressive Structural</a></li>
                   </ul>
                 </li>
                 <li class="dropdown"><a data-filter=".Stimulating" href="#" 
                                         data-toggle="dropdown" class="dropdown-toggle">Stimulating <b class="caret"></b></a>
                   <ul class="dropdown-menu">
                        <li><a data-filter=".Stimulating, .Dark" href="#">Dark</a></li>
                        <li><a data-filter=".Stimulating, .Luminous" href="#">Luminous</a></li>
                   </ul>
                 </li>
               </ul>
              </div>
              <button id="buttonPredict" type="button" class="btn btn-default navbar-btn navbar-right">Predict</button>
            </div>
          </div>
        </div>
        <!--placeholder -->
        <div id="contentDiv">
            <div class="itemsDiv">                
            </div>            
        </div>        
        
        <div id="predictionDiv">
            <div id="prey-analysis" ondrop="drop(event)" ondragover="allowDrop(event)">
                <svg id="force-graph" width="708" height="450">
                    <g id='loading' visibility='hidden'>
                        <path opacity=".25" d="M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"/>
                        <path d="M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z">
                            <animateTransform attributeName="transform" type="rotate" from="0 16 16" to="360 16 16" dur="0.8s" repeatCount="indefinite" />
                        </path>
                    </g>
                </svg>
            </div>
            <div id="preyContainer">
                <div class="preyBadge" draggable="true"></div>
                <div class="preyBadge" draggable="true"></div>
                <div class="preyBadge" draggable="true"></div>
                <div class="preyBadge" draggable="true"></div>
            </div>
        </div>
        
        <div id="preyViewDiv">
            <div id="preyGallery">
                <div id="preyPhoto">                    
                </div>            
            </div>
            <div id="preyInfo">
                <div id="preyTitle">                    
                </div>
                <div class="col-sm-12">
                  <ul id="preyDetail" class="list-group">
                    <li id="preyLink" class="list-group-item"></li>
                    <li id="preyTags" class="list-group-item"></li>
                  </ul>
                </div>
                <div id="preySemantics">
                    <svg></svg>
                </div>
            </div>
        </div>
        
        
        
        <script src="./js/libs/d3.v3.min.js" charset="utf-8"></script>
        <script src="./js/d3_predict.js" charset="utf-8"></script>
        <script src="./js/ui.js"></script>
        <script src="./js/libs/bootstrap.js"></script>
        <script src="./js/libs/isotope.pkgd.min.js"></script>
        <script src="./js/libs/imagesloaded.pkgd.min.js"></script>
        <script src="./js/isoConfig.js"></script>
        <script src="./js/preyView.js"></script>  
        <script type="text/javascript"> $(document).ready(function () { $('.dropdown-toggle').dropdown(); }); </script>
        <style>
            .dropdown:hover .dropdown-menu {
                display: block;
             }
        </style>
        
        <script>
            $.ajax({
              dataType: "json",
              url: "./data/final_feeds.json"
            }).done(function(data) {
                
                  for(var i=0;i<50;i++){
                    var d = data[i];                      
                    var cols = d.colors;
                      
                    $('<div/>',{
                        'id'    : 'item_' + d.id,
                        'class' : 'item ' + d.semanticClass
                    }).appendTo('.itemsDiv');
                      
                    $('<div/>',{
                        'id'    : 'itemImage_' + d.id,
                        'class' : 'itemImage'
                    }).appendTo('#item_'+d.id).append(
                        $('<img/>', {
                            'src' : 'images/' + d.id,
                        }),
                        $('<figcaption/>', {
                            html : d.descr,
                        })
                    );

                    $('<div class="itemCol1" style="background-color:' + cols[2] +'"></div>').insertAfter($('#itemImage_'+d.id));
                    $('<div class="itemCol2" style="background-color:' + cols[1] +'"></div>').insertAfter($('#itemImage_'+d.id));
                    $('<div class="itemCol3" style="background-color:' + cols[0] +'"></div>').insertAfter($('#itemImage_'+d.id));

                    $('#item_'+d.id).data('preyData', d);                      
                }
                
                var $container = $('.itemsDiv');
    $container.imagesLoaded(function() {
        $container.isotope({
            filter: '*',
            itemSelector: '.item',
            layoutMode: 'masonry',
            animationOptions: {
                duration: 750,
                easing: 'linear',
                queue: false
            }
        })
    });
 
    $('.filters a').click(function(){
        $('.filters .active').closest('li').removeClass('active');
        $(this).closest('li').addClass('active');
        
        //hide preyView
        $('#preyViewDiv').hide();

        //hide userView
        $('#userViewDiv').hide();

        //hide prediction view
        $('#predictionDiv').hide();
 
        var selector = $(this).attr('data-filter');
        $container.imagesLoaded(function() {
            $container.isotope({filter: selector,
                itemSelector: '.item',
                layoutMode: 'masonry',
                animationOptions: {
                    duration: 750,
                    easing: 'linear',
                    queue: false
                }
             })
        });
         return false;
    });
                
            });
        </script>
    </body>
</html>